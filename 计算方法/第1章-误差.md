# 误差

一个大题一个选择题（2.29上课口述）

## 掌握重点

-   掌握方法误差和舍入误差的概念
-   熟练掌握误差、误差限和有效数字的概念
-   掌握有效数字位与误差限之间的关系
-   熟练掌握相对误差和相对误差限的概念
-   掌握相对误差与有效数字的关系
-   了解数值计算中的误差估计(误差传递)
-   掌握数值计算中应该注意的问题

## 方法误差与舍入误差

模型误差:将数学模型与实际问题之间出现的误差(不予讨论)

观测误差:根据观测得到的物理量的误差(不予讨论)

`方法误差`:用数值方法求解得到的近似解和精确解之间的误差<u>（比如说用泰勒展开近似就会产生方法误差）</u>

`舍入误差`:<u>（由于计算机字长有限带来的误差）</u>

-   原始数据在计算机中表示会产生误差,计算过程又可能产生新的误差
-   由原始数据或机器中的十进制数转为二进制数产生的初始误差

## 误差、误差限和有效数字

`误差`:设$x$为准确值,$x^*$为$x$的一个近似值,则称$e^* = x^* - x$​为近似值的`绝对误差`,简称`误差`.

`误差限`:一般我们无法算出准确值$x$,也不能算出误差$e^*$的准确值,只能估算误差的绝对值不超过某个正数$\epsilon^*$,也就是误差绝对值的一个<u>上界</u>,$\epsilon ^*$​称为近似值的`误差限`。

`有效数字：`如果近似值$x^*$的误差限是某一位的半个单位，该位到$x^*$的第一位非零数字共有n位，就说$x^*$有n位有效数字。

## 有效数字位和误差限的关系

按照<u>四舍五入</u>原则得到的近似值的误差<u>不会超过末尾数字的半个单位</u>。

若近似值 $x^*$ 的误差限是某一位的半个单位,该位到 $x^*$ 的第一位非零数字共有n位,就说 $x^*$ 有 $n$ 位有效数字.它可表示为 
$$
x^* = ±10^{m}\times(a_1+a_2\times10^{-1}+...+an\times10^{-n-1})
$$
其中 $a_i(i=1,2,...,n)$ 是 $0$ 到 $9$ 中的一个数字, $a_1\neq0$, $m$ 为整数,且
$$
|\frac{x-x^*}{x^*}| \leqslant \frac{1}{2}\times10^{m-n+1}
$$
例如,取 $x^*=3.14$ 作 $\pi$ 的近似值, $x^*$ 就有 $3$ 位有效数字,取 $x^*=3.1416\approx\pi$, $x^*$ 就有 $5$ 位有效数字.

## 相对误差和相对误差限

相对误差：近似值的误差$e^*$与准确值$x$的比值。
$$
\frac{e^x}{x} = \frac{x^* -x}{x^*}
$$
通常取$e^*_r = \frac{e^*}{x^*} = \frac{x^* - x}{x^*}$作为相对误差，条件是$e^*_r = \frac{e^x}{x^*}$较小。

相对误差的绝对值上界叫做相对误差限，记作$\epsilon^*_r = \frac{\epsilon^*}{|x^*|}$

## 相对误差与有效数字的关系

有效位数越多，相对误差限越小

设近似数 $x^*$ 表示为 
$$
x^* = \pm 10^{m}\times(a_1+a_2\times10^{-1}+\cdots+a_i\times10^{-n-1})
$$
其中 $a_i(i=1,2,...,l)$ 是 $0$ 到 $9$ 中的一个数字，$a_1\neq0$ ，$m$ 为整数。若 $x^*$ 有 $n$ 位有效数字，则其相对误差限 
$$
\varepsilon^*\leq\frac{1}{2a_1}\times10^{-(\n-1)}
$$


反之，若 $x^*$ 的相对误差限 $\varepsilon^*\leq\frac{1}{2(a_1+1)}\times10^{-(n-1)}$ ，则 $x^*$至少具有n位有效数字。



## 数值计算中的误差估计(误差传递)

设两个近似数$x^{*}_{1}$与$x^{*}_{2}$的误差限分别为$ε(x^{*}_{1})$及$ε(x^{*}_{2})$，则它们进行加、减、乘、除运算得到的误差限分别满足不等式

==以下公式用泰勒展开来记忆，$df =  f_x \Delta x + f_y \Delta y$，其中$\Delta x$ 就等于误差限$\epsilon (x^*)$。==
$$
\varepsilon (x^{*}_{1}\pm x^{*}_{2})\leq\varepsilon (x^{*}_{1})+\varepsilon (x^{*}_{2})
\\
\varepsilon (x^{*}_{1}x^{*}_{2})\leq|{x_{1}^{*}}|\varepsilon (x^{*}_{2})+|x_{2}^{2}|\varepsilon (x^{*}_{1})
\\
\varepsilon (x^{*}_{1}/x^{*}_{2})\leq\frac{|{x_{1}^{*}}|\varepsilon (x^{*}_{2})+|{x_{2}^{*}}|\varepsilon (x^{*}_{1})}{|x_{2}^*|^{2}},x^*_2\neq0
$$
更一般的情况采用`泰勒展开`来证明，误差限
$$
\epsilon(A^*) \approx \Sigma^n_{k = 1}| (\frac{\partial f}{\partial x_k})^*|\epsilon (x^*_k)
$$

## 数值计算中应该注意的问题

-   算法的`数值稳定性`：如果一个算法输入数据有误差，而在计算过程中舍入误差不增长，则称此算法是数值稳定的，否则为不稳定的。
-   `病态问题`和`条件数`：如果一个数值问题本身输入数据有误差，引起输出数据相对误差很大，就是病态问题。相对误差比值$C_P$为计算函数值问题的条件数，如果很大，将引起病态问题。
-   `避免误差危害`：
    -   `避免两个相近的数相减`
    -   防止小数被大数“吃掉”，导致`有效数字`损失。（大数和小数参与加减运算）
    -   注意`减少运算次数`（如n阶多项式求和可以采用秦九韶算法降低乘法次数）
    -   `避免除绝对值很小的数`
    -   选择`数值稳定`的计算公式（注意数值稳定性）